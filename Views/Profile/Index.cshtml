@{
    ViewData["Title"] = "Profile";
}

<h1>Your Profile</h1>

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success">@TempData["SuccessMessage"]</div>
}
@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger">@TempData["ErrorMessage"]</div>
}

<h3>Profile Information</h3>
<div class="card mb-4">
    <div class="card-body">
        <p><strong>First Name:</strong> @ViewData["FirstName"]</p>
        <p><strong>Last Name:</strong> @ViewData["LastName"]</p>
        <p><strong>Age:</strong> @ViewData["Age"]</p>
        <p><strong>Phone Number:</strong> @ViewData["PhoneNumber"]</p>
        <p><strong>Address:</strong> @ViewData["Address"]</p>
    </div>
</div>

<!-- Nút để mở form -->
<button class="btn btn-warning mb-3" onclick="toggleForm()">Update</button>

<!-- Form ẩn/hiện -->
<div id="updateForm" style="display: none;">
    <form asp-controller="Profile" asp-action="UpdateProfile" method="post">
        @Html.AntiForgeryToken()
        <div class="form-group mb-3">
            <label for="firstName">First Name</label>
            <input type="text" name="firstName" class="form-control" value="@ViewData["FirstName"]" required />
        </div>
        <div class="form-group mb-3">
            <label for="lastName">Last Name</label>
            <input type="text" name="lastName" class="form-control" value="@ViewData["LastName"]" required />
        </div>
        <div class="form-group mb-3">
            <label for="age">Age</label>
            <input type="number" name="age" class="form-control" value="@ViewData["Age"]" min="0" required />
        </div>
        <div class="form-group mb-3">
            <label for="phoneNumber">Phone Number</label>
            <input type="text" name="phoneNumber" class="form-control" value="@ViewData["PhoneNumber"]" required />
        </div>
        <div class="form-group mb-3">
            <label for="address">Address</label>
            <input type="text" name="address" class="form-control" value="@ViewData["Address"]" required />
        </div>
        <button type="submit" class="btn btn-primary">Update Profile</button>
    </form>
</div>

<p class="mt-3"><a href="/Book" class="btn btn-secondary">Back to Books</a></p>

@section Scripts {
    <script>
        function toggleForm() {
            var form = document.getElementById("updateForm");
            form.style.display = (form.style.display === "none") ? "block" : "none";
        }
    </script>
}
